<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aplicaci칩n para productos</title>
    <style>
      body {
        background-color: #000000;
        font-family: "Gill Sans", "Gill Sans MT", Calibri, sans-serif;
        color: #f5f5f5;
        margin: 0;
        padding: 0;
        text-align: center;
      }
      h1 {
        color: #ffa76d;
        margin-top: 25px;
        margin-bottom: 25px;
        font-family: "Courier New", monospace;
        letter-spacing: 1px;
      }
      #aparecerFormulario {
        background-color: #ffa76d;
        color: #000000;
        border: none;
        padding: 10px 26px;
        font-size: 16px;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.25s;
        margin-top: 10px;
      }
      #aparecerFormulario:hover {
        background-color: #f5f5f5;
      }
      #formulario {
        display: none;
        width: 25%;
        min-width: 250px;
        margin: 0;
        padding: 25px 30px;
        background-color: #1a1a1a;
        border-radius: 14px;
        box-shadow: 0 0 18px rgba(204, 198, 193, 0.22);
        flex-direction: column;
        align-items: center;
        gap: 5px;
      }
      .input {
        background-color: #3c3c3c;
        border: 2px solid #ffa76d;
        color: #f5f5f5;
        padding: 6px 8px;
        width: 250px;
        border-radius: 6px;
        font-size: 14px;
        margin-bottom: 8px;
      }
      input::placeholder {
        color: red;
      }
      .input-error {
        border: 2px solid red !important;
      }
      #productos label {
        text-align: left;
        font-size: 14px;
        margin-bottom: 2px;
        color: #ffa76d;
        display: block;
      }
      .input:focus {
        outline: none;
        border-color: #f5f5f5;
        box-shadow: 0 0 6px #ffa76d;
      }
      #agregar {
        background-color: #ffa76d;
        color: #000000;
        border: none;
        padding: 10px 26px;
        font-size: 16px;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.25s;
        margin-top: 10px;
      }
      #agregar:hover {
        background-color: #f5f5f5;
      }
      #contenedorPrincipal {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        width: 95%;
        margin: auto;
        margin-top: 30px;
        gap: 30px;
      }
      #tablaProductos {
        flex-grow: 1;
      }
      .grid-productos {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 20px;
        padding: 20px;
      }
      .item {
        background-color: #1a1a1a;
        padding: 10px;
        border-radius: 12px;
        box-shadow: 0 0 12px rgba(255, 167, 109, 0.18);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }
      .item:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 20px rgba(255, 167, 109, 0.35);
      }
      .grid-productos img {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <h1>Cat치logo para productos</h1>
    <button id="aparecerFormulario" type="button">A침adir Producto</button>
    <div id="contenedorPrincipal">
      <div id="formulario"></div>
      <div id="tablaProductos"></div>
    </div>
    <div id="mostrarInformacionProducto"></div>
    <script>
      let productos = [];
      let cantidad = 0;
      const tablaProductos = document.getElementById("tablaProductos");
      const formulario = document.getElementById("formulario");
      const mostrarInformacionProducto = document.getElementById(
        "mostrarInformacionProducto"
      );
      const aparecerFormulario = document.getElementById("aparecerFormulario");
      function generarInformacionProductos() {
        for (let producto of productos) {
          const img = document.getElementById("img-" + producto.id);
          if (img) {
            img.addEventListener("click", () => {
              mostrarInformacion(
                producto.nombre,
                producto.id,
                producto.precio,
                producto.descripcion
              );
            });
          }
        }
      }
      function mostrarInformacion(nombre, id, precio, descripcion) {
        alert(
          "nombre = " +
            nombre +
            " id = " +
            id +
            " precio = " +
            precio +
            " descripcion = " +
            descripcion
        );
      }
      aparecerFormulario.addEventListener("click", mostrarFormulario);
      function mostrarFormulario() {
        formulario.style.display = "block";
        formulario.innerHTML = `
                <form id="productos">
                    <label for="id">ID:</label>
                    <input class="input" id="id" type="text">
                    <label for="nombre">Nombre:</label>
                    <input class="input" id="nombre" type="text">
                    <label for="descripcion">Descripcion:</label>
                    <input class="input" id="descripcion" type="text">
                    <label for="precio">Precio:</label>
                    <input class="input" id="precio" type="number">
                    <label for="imagen">Imagen:</label>
                    <input class="input" id="imagen" type="file">
                    <button id="agregar" type="button">Agregar Producto</button>
                </form>
            `;
        const agregar = document.getElementById("agregar");
        agregar.addEventListener("click", () => {
          const id_elemento = document.getElementById("id");
          const nombre_elemento = document.getElementById("nombre");
          const descripcion_elemento = document.getElementById("descripcion");
          const precio_elemento = document.getElementById("precio");
          const imagen_elemento = document.getElementById("imagen");
          let id = id_elemento.value;
          const nombre = nombre_elemento.value;
          const descripcion = descripcion_elemento.value;
          const precio = precio_elemento.value;
          const imagen = imagen_elemento.files[0];
          const error = comprobarDatos(
            id,
            id_elemento,
            nombre,
            nombre_elemento,
            descripcion,
            descripcion_elemento,
            precio,
            precio_elemento,
            imagen,
            imagen_elemento
          );
          if (error) {
            return;
          } else {
            const urlImagen = URL.createObjectURL(imagen);
            if (!id) {
              id = String(cantidad++);
            }
            const producto = {
              id,
              nombre,
              descripcion,
              precio,
              imagen: urlImagen,
            };
            productos.push(producto);
          }
          if (productos.length > 0) {
            mostrarTabla();
            formulario.style.display = "none";
          }
        });
      }
      function comprobarDatos(
        id,
        id_elemento,
        nombre,
        nombre_elemento,
        descripcion,
        descripcion_elemento,
        precio,
        precio_elemento,
        imagen,
        imagen_elemento
      ) {
        let error = false;
        for (let producto of productos) {
          if (id === producto.id) {
            error = true;
            mostrarError(id_elemento, "Id duplicada, ingrese una id diferente");
          }
        }
        if (!nombre) {
          error = true;
          mostrarError(nombre_elemento, "Nombre es un campo obligatorio");
        }
        if (!descripcion) {
          error = true;
          mostrarError(
            descripcion_elemento,
            "Descripci칩n es un campo obligatorio"
          );
        }
        if (!precio) {
          error = true;
          mostrarError(precio_elemento, "Precio es un campo obligatorio");
        }
        if (!imagen) {
          error = true;
          mostrarError(imagen_elemento, "Imagen es un campo obligatorio");
        }
        return error;
      }
      function mostrarError(elemento, error) {
        elemento.classList.add("input-error");
        elemento.value = "";
        elemento.placeholder = error;
      }
      function mostrarTabla() {
        tablaProductos.innerHTML = "";
        let tabla = `<div class="grid-productos">`;
        for (let producto of productos) {
          tabla += `
                    <div class="item">
                        <img src="${producto.imagen}" id="img-${producto.id}" alt="${producto.nombre}">
                    </div>
                `;
        }
        tabla += `</div>`;
        tablaProductos.innerHTML = tabla;
        generarInformacionProductos();
      }
    </script>
  </body>
</html>
